#!/bin/bash
read -p 'IP to look for: ' ip
echo Var is $ip
if grep -Fq $ip addrules
then
    echo IP already exist in addrules
    rule=`iptables -L -n |grep $ip`
    echo This ip is already associated with an active firewall rule
    echo This is what the rule looks like: $rule
    head -15 addrules
    echo
#    num=`iptables -L -n |wc -l`
#    echo There are $num lines in iptables
    var=`cat addrules|wc -l`
    var1=7
    echo There are $((var-var1)) active rules in the firewall
    # code if found
else
    echo Does not exist, This IP address should be added to addrules
    echo Use banip.sh to block the ip from accessing this system
#    sed -i "/^iptables -A INPUT -j LOG/a iptables -A INPUT -s $ipaddr/32 -p tcp -j DROP" addrules
#    ./addrules
#    iptables -L -n |grep $ip 
    echo
#    num=`iptables -L -n |wc -l`
#    echo There are $num lines in iptables
    var=`cat addrules|wc -l`
    var1=7
    echo There are $((var-var1)) active rules in the firewall
    # code if not found
fi
echo done

